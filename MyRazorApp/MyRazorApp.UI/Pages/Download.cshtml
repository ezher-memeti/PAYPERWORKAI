@page
@model DownloadModel
@{
    ViewData["Title"] = "Review Your Video";
}

<link rel="stylesheet" href="~/css/Download.css" />

<div class="video-review-container">
    <h2 class="page-title">Review Your Video</h2>

    <!-- Video Card Container -->
    <div class="video-card">
        <div id="loadingContainer">
            <img src="/Assets/loading.gif" alt="Generating..." class="loading-gif">
        </div>
        <video id="videoPlayer" controls class="video-player hidden">
            <source src="@Model.VideoUrl" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
    
    <div class="details-cont">
        <!-- Details Row -->
        <div class="details-row">
            <!-- Category -->
            <div class="category-box">
                <span class="label">Category</span>
                <div class="category-text">@Model.Category</div>
            </div>

            <!-- Images -->
            <div class="images-box">
                <span class="label">Images</span>
                <div class="image-grid">
                    <img src="@Model.Image1Url" alt="Input 1" class="image-thumbnail">
                    <img src="@Model.Image2Url" alt="Input 2" class="image-thumbnail">
                </div>
            </div>

            <!-- Prompt -->
            <div class="prompt-box">
                <span class="label">Prompt</span>
                <div class="prompt-text">@Model.Prompt</div>
            </div>

            <!-- Buttons -->
            <div class="buttons">
                <a id="downloadBtn" href="@Model.VideoUrl" download class="btn download-btn">
                    Download Video <img src="/Assets/Download.svg">
                </a>
                <a asp-page="/CategorySelection" class="btn generate-btn">
                    Generate New AI Video <img src="/Assets/generate.svg">
                </a>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for Handling Loading -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const loadingContainer = document.getElementById('loadingContainer');
        const videoPlayer = document.getElementById('videoPlayer');
        const downloadBtn = document.getElementById('downloadBtn');

        // Simulate video loading
        setTimeout(() => {
            loadingContainer.classList.add('hidden');
            videoPlayer.classList.remove('hidden');
            downloadBtn.classList.remove('hidden'); // Download butonunu göster
        }, 2500); // 2.5 saniye sonra video yüklendi varsayalım
    });
</script>